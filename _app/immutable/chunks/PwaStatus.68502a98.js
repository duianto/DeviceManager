import{s as E,e as w,i as m,y as u,d as h,A as y,f as k,g as v,u as b,j as p,x}from"./scheduler.780b4b73.js";import{S as L,i as P}from"./index.2808127b.js";import{_ as C}from"./preload-helper.a4192956.js";import{w as R}from"./index.c4cb2da7.js";function N(a={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:s,onRegistered:t,onRegisteredSW:i,onRegisterError:r}=a;let o,c,l;const S=async(g=!0)=>{await c,await l?.()};async function W(){if("serviceWorker"in navigator){const{Workbox:g}=await C(()=>import("./workbox-window.prod.es5.a7b12eab.js"),[],import.meta.url);o=new g("/sw.js",{scope:"/",type:"classic"}),l=async()=>{await o?.messageSkipWaiting()};{let f=!1;const _=()=>{f=!0,o?.addEventListener("controlling",d=>{d.isUpdate&&window.location.reload()}),n?.()};o.addEventListener("installed",d=>{typeof d.isUpdate>"u"?typeof d.isExternal<"u"?d.isExternal?_():!f&&s?.():d.isExternal?window.location.reload():!f&&s?.():d.isUpdate||s?.()}),o.addEventListener("waiting",_),o.addEventListener("externalwaiting",_)}o.register({immediate:e}).then(f=>{i?i("/sw.js",f):t?.(f)}).catch(f=>{r?.(f)})}}return c=W(),S}function U(a={}){const{immediate:e=!0,onNeedRefresh:n,onOfflineReady:s,onRegistered:t,onRegisteredSW:i,onRegisterError:r}=a,o=R(!1),c=R(!1),l=N({immediate:e,onOfflineReady(){c.set(!0),s?.()},onNeedRefresh(){o.set(!0),n?.()},onRegistered:t,onRegisteredSW:i,onRegisterError:r});return{needRefresh:o,offlineReady:c,updateServiceWorker:l}}function O(a){let e,n="offline_pin";return{c(){e=k("div"),e.textContent=n,this.h()},l(s){e=v(s,"DIV",{title:!0,class:!0,"data-svelte-h":!0}),b(e)!=="svelte-u4b4iq"&&(e.textContent=n),this.h()},h(){p(e,"title","App can now be used offline"),p(e,"class","icon")},m(s,t){m(s,e,t)},p:u,d(s){s&&h(e)}}}function T(a){let e,n='Update <span class="icon">update</span>',s,t;return{c(){e=k("button"),e.innerHTML=n,this.h()},l(i){e=v(i,"BUTTON",{title:!0,class:!0,"data-svelte-h":!0}),b(e)!=="svelte-trksef"&&(e.innerHTML=n),this.h()},h(){p(e,"title","Update ready"),p(e,"class","svelte-9dwesr")},m(i,r){m(i,e,r),s||(t=x(e,"click",a[5]),s=!0)},p:u,d(i){i&&h(e),s=!1,t()}}}function j(a){let e;function n(i,r){if(i[0])return T;if(i[1])return O}let s=n(a),t=s&&s(a);return{c(){t&&t.c(),e=w()},l(i){t&&t.l(i),e=w()},m(i,r){t&&t.m(i,r),m(i,e,r)},p(i,[r]){s===(s=n(i))&&t?t.p(i,r):(t&&t.d(1),t=s&&s(i),t&&(t.c(),t.m(e.parentNode,e)))},i:u,o:u,d(i){i&&h(e),t&&t.d(i)}}}function A(a,e,n){let s,t;const{needRefresh:i,updateServiceWorker:r,offlineReady:o}=U();return y(a,i,l=>n(0,s=l)),y(a,o,l=>n(1,t=l)),[s,t,i,r,o,()=>r(!0)]}class I extends L{constructor(e){super(),P(this,e,A,j,E,{})}}export{I as default};
//# sourceMappingURL=PwaStatus.68502a98.js.map
