import{s as ue,e as oe,i as O,d,t as be,f as T,a as U,g as S,h as P,c as I,u as W,j as k,C as V,v as C,x as Y,z as ge,r as Me,p as ve,y as X,k as Te,B as ke,S as We,A as re,L as Xe,l as G,m as Q,n as ce,Q as Fe,w as Se,o as Je,R as Ge,T as Qe}from"../chunks/scheduler.780b4b73.js";import{S as fe,i as de,g as le,c as ie,a as M,t as z,b as Z,d as x,m as ee,e as te,f as ae}from"../chunks/index.2808127b.js";import{e as _e,u as Be,o as He}from"../chunks/each.75920ee7.js";import{b as Ze,K as xe,s as et,a as tt}from"../chunks/keymap-codes.618d0a5c.js";import{A as nt,S as st,I as rt}from"../chunks/SharePopup.2386d7d1.js";import{L as ze}from"../chunks/i18n-svelte.03873352.js";import{c as ne,C as se,t as ot,b as $e,a as we}from"../chunks/os-layout.7df58f56.js";import{d as Ae,w as Oe}from"../chunks/index.c4cb2da7.js";import{A as lt}from"../chunks/Action.22f9869a.js";import{c as De,s as me,d as it}from"../chunks/index.dd8d0fd3.js";import{s as Ye}from"../chunks/connection.d00f3c10.js";import{a as at}from"../chunks/share-url.4f533277.js";function Ne(o,e,s){const n=o.slice();return n[2]=e[s],n[4]=s,n}function Pe(o,e){let s,n,l;return n=new lt({props:{action:e[2],display:e[1]}}),{key:o,first:null,c(){s=oe(),Z(n.$$.fragment),this.h()},l(r){s=oe(),x(n.$$.fragment,r),this.h()},h(){this.first=s},m(r,a){O(r,s,a),ee(n,r,a),l=!0},p(r,a){e=r;const t={};a&1&&(t.action=e[2]),a&2&&(t.display=e[1]),n.$set(t)},i(r){l||(M(n.$$.fragment,r),l=!0)},o(r){z(n.$$.fragment,r),l=!1},d(r){r&&d(s),te(n,r)}}}function ct(o){let e=[],s=new Map,n,l,r=_e(o[0]);const a=t=>`${typeof t[2]=="number"?t[2]:t[2].code}:${t[4]}`;for(let t=0;t<r.length;t+=1){let i=Ne(o,r,t),c=a(i);s.set(c,e[t]=Pe(c,i))}return{c(){for(let t=0;t<e.length;t+=1)e[t].c();n=oe()},l(t){for(let i=0;i<e.length;i+=1)e[i].l(t);n=oe()},m(t,i){for(let c=0;c<e.length;c+=1)e[c]&&e[c].m(t,i);O(t,n,i),l=!0},p(t,[i]){i&3&&(r=_e(t[0]),le(),e=Be(e,i,a,1,t,r,s,n.parentNode,He,Pe,n,Ne),ie())},i(t){if(!l){for(let i=0;i<r.length;i+=1)M(e[i]);l=!0}},o(t){for(let i=0;i<e.length;i+=1)z(e[i]);l=!1},d(t){t&&d(n);for(let i=0;i<e.length;i+=1)e[i].d(t)}}}function ut(o,e,s){let{actions:n}=e,{display:l="inline-keys"}=e;return o.$$set=r=>{"actions"in r&&s(0,n=r.actions),"display"in r&&s(1,l=r.display)},[n,l]}class je extends fe{constructor(e){super(),de(this,e,ut,ct,ue,{actions:0,display:1})}}function Ke(o,e,s){const n=new nt({target:document.body}),l=document.querySelector("dialog > div"),r=document.querySelector("dialog"),a=l.getBoundingClientRect(),t=o.target.getBoundingClientRect(),i=.5,c=`${1-i*(1-t.width/a.width)} ${1-i*(1-t.height/a.height)}`,_=`${i*(t.x-a.x)}px ${i*(t.y-a.y)}px`,v={duration:150,easing:"ease"},m=l.animate([{scale:c,translate:_},{translate:"0 0",scale:"1"}],v),$=r.animate([{opacity:0},{opacity:1}],v);async function f(){m.reverse(),$.reverse(),await m.finished,n.$destroy(),await be(),s?.()}n.$on("close",f),n.$on("select",({detail:u})=>{e(u),f()})}function qe(o,e){return e?Ze.get(o.code):xe.get(o.key)?.code??et.get(o.key)}function ft(o){let e;return{c(){e=T("div")},l(s){e=S(s,"DIV",{}),P(e).forEach(d)},m(s,n){O(s,e,n)},p:X,i:X,o:X,d(s){s&&d(e)}}}function dt(o){let e,s,n="add",l,r=`${o[3]}px 0`,a,t,i;return{c(){e=T("div"),s=T("button"),s.textContent=n,this.h()},l(c){e=S(c,"DIV",{class:!0});var _=P(e);s=S(_,"BUTTON",{class:!0,"data-svelte-h":!0}),W(s)!=="svelte-1y7ruzp"&&(s.textContent=n),_.forEach(d),this.h()},h(){k(s,"class","icon svelte-niexr"),k(e,"class","cursor svelte-niexr"),Te(e,"translate",r)},m(c,_){O(c,e,_),C(e,s),o[8](s),a=!0,t||(i=Y(s,"click",o[7]),t=!0)},p(c,_){_&8&&r!==(r=`${c[3]}px 0`)&&Te(e,"translate",r)},i(c){a||(c&&ke(()=>{a&&(l||(l=ae(e,De,{},!0)),l.run(1))}),a=!0)},o(c){c&&(l||(l=ae(e,De,{},!1)),l.run(0)),a=!1},d(c){c&&d(e),o[8](null),c&&l&&l.end(),t=!1,i()}}}function ht(o){let e,s,n,l,r,a,t,i="•",c,_,b;const v=[dt,ft],m=[];function $(f,u){return f[4]?0:1}return s=$(o),n=m[s]=v[s](o),r=new je({props:{actions:o[0].phrase}}),{c(){e=T("div"),n.c(),l=U(),Z(r.$$.fragment),a=U(),t=T("sup"),t.textContent=i,this.h()},l(f){e=S(f,"DIV",{role:!0,tabindex:!0,class:!0});var u=P(e);n.l(u),l=I(u),x(r.$$.fragment,u),a=I(u),t=S(u,"SUP",{class:!0,"data-svelte-h":!0}),W(t)!=="svelte-ouf49e"&&(t.textContent=i),u.forEach(d),this.h()},h(){k(t,"class","svelte-niexr"),k(e,"role","textbox"),k(e,"tabindex","0"),k(e,"class","svelte-niexr"),V(e,"edited",!o[0].deleted&&o[0].phraseChanged)},m(f,u){O(f,e,u),m[s].m(e,null),C(e,l),ee(r,e,null),C(e,a),C(e,t),o[9](e),c=!0,_||(b=[Y(e,"keydown",o[5]),Y(e,"mousedown",o[6]),Y(e,"focusin",o[10]),Y(e,"focusout",o[11])],_=!0)},p(f,[u]){let y=s;s=$(f),s===y?m[s].p(f,u):(le(),z(m[y],1,1,()=>{m[y]=null}),ie(),n=m[s],n?n.p(f,u):(n=m[s]=v[s](f),n.c()),M(n,1),n.m(e,l));const E={};u&1&&(E.actions=f[0].phrase),r.$set(E),(!c||u&1)&&V(e,"edited",!f[0].deleted&&f[0].phraseChanged)},i(f){c||(M(n),M(r.$$.fragment,f),c=!0)},o(f){z(n),z(r.$$.fragment,f),c=!1},d(f){f&&d(e),m[s].d(),te(r),o[9](null),_=!1,ge(b)}}}function pt(o,e,s){let{chord:n}=e;function l(h){if(h.key==="ArrowUp")c(h);else if(h.key==="ArrowLeft")r(v-1);else if(h.key==="ArrowRight")r(v+1);else if(h.key==="Backspace")a(v-1),r(v-1);else if(h.key==="Delete")a(v);else{const D=qe(h,Me(Ye)?.device==="X");D!==void 0&&(t(v,D),be().then(()=>r(v+1)))}}function r(h){v=Math.max(0,Math.min(h,n.phrase.length));const D=b.children.item(v);s(3,m=D.offsetLeft+D.offsetWidth)}function a(h,D=1){h in n.phrase&&ne.update(N=>(N.push({type:se.Chord,id:n.id,actions:n.actions,phrase:n.phrase.toSpliced(h,D)}),N))}function t(h,D){ne.update(N=>(N.push({type:se.Chord,id:n.id,actions:n.actions,phrase:n.phrase.toSpliced(h,0,D)}),N))}function i(h){if(h.target===_)return;const D=h.layerX;let N=0;for(const B of b.children){const{offsetLeft:g,offsetWidth:p}=B;if(D<g+p/2){r(N-1);return}N++}r(N-1)}function c(h){Ke(h,D=>{t(v,D),be().then(()=>r(v+1))},()=>b.focus())}let _,b,v=0,m=0,$=!1;function f(h){ve[h?"unshift":"push"](()=>{_=h,s(1,_)})}function u(h){ve[h?"unshift":"push"](()=>{b=h,s(2,b)})}const y=()=>s(4,$=!0),E=h=>{h.relatedTarget!==_&&s(4,$=!1)};return o.$$set=h=>{"chord"in h&&s(0,n=h.chord)},[n,_,b,m,$,l,i,c,f,u,y,E]}class _t extends fe{constructor(e){super(),de(this,e,pt,ht,ue,{chord:0})}}function mt(o){let e,s=o[3].configure.chords.NEW_CHORD()+"",n;return{c(){e=T("span"),n=G(s),this.h()},l(l){e=S(l,"SPAN",{class:!0});var r=P(e);n=Q(r,s),r.forEach(d),this.h()},h(){k(e,"class","svelte-1s2fsgj")},m(l,r){O(l,e,r),C(e,n)},p(l,r){r&8&&s!==(s=l[3].configure.chords.NEW_CHORD()+"")&&ce(n,s)},d(l){l&&d(e)}}}function gt(o){let e,s=o[3].configure.chords.HOLD_KEYS()+"",n;return{c(){e=T("span"),n=G(s),this.h()},l(l){e=S(l,"SPAN",{class:!0});var r=P(e);n=Q(r,s),r.forEach(d),this.h()},h(){k(e,"class","svelte-1s2fsgj")},m(l,r){O(l,e,r),C(e,n)},p(l,r){r&8&&s!==(s=l[3].configure.chords.HOLD_KEYS()+"")&&ce(n,s)},d(l){l&&d(e)}}}function bt(o){let e,s,n,l,r,a="add_circle",t,i,c="•",_,b,v;function m(u,y){if(u[2]&&u[1].size===0)return gt;if(!u[2]&&!u[0])return mt}let $=m(o),f=$&&$(o);return n=new je({props:{display:"keys",actions:o[2]?[...o[1]].sort(J):o[0]?.actions??[]}}),{c(){e=T("button"),f&&f.c(),s=U(),Z(n.$$.fragment),l=U(),r=T("button"),r.textContent=a,t=U(),i=T("sup"),i.textContent=c,this.h()},l(u){e=S(u,"BUTTON",{class:!0});var y=P(e);f&&f.l(y),s=I(y),x(n.$$.fragment,y),l=I(y),r=S(y,"BUTTON",{class:!0,"data-svelte-h":!0}),W(r)!=="svelte-1vh2mm9"&&(r.textContent=a),t=I(y),i=S(y,"SUP",{class:!0,"data-svelte-h":!0}),W(i)!=="svelte-ouf49e"&&(i.textContent=c),y.forEach(d),this.h()},h(){k(r,"class","icon add svelte-1s2fsgj"),k(i,"class","svelte-1s2fsgj"),k(e,"class","chord svelte-1s2fsgj"),V(e,"deleted",o[0]&&o[0].deleted),V(e,"edited",o[0]&&o[0].actionsChanged),V(e,"invalid",o[0]&&o[0].actions.toSorted(J).some(o[8]))},m(u,y){O(u,e,y),f&&f.m(e,null),C(e,s),ee(n,e,null),C(e,l),C(e,r),C(e,t),C(e,i),_=!0,b||(v=[Y(r,"click",We(o[7])),Y(e,"click",o[4]),Y(e,"keydown",o[5]),Y(e,"keyup",o[6])],b=!0)},p(u,[y]){$===($=m(u))&&f?f.p(u,y):(f&&f.d(1),f=$&&$(u),f&&(f.c(),f.m(e,s)));const E={};y&7&&(E.actions=u[2]?[...u[1]].sort(J):u[0]?.actions??[]),n.$set(E),(!_||y&1)&&V(e,"deleted",u[0]&&u[0].deleted),(!_||y&1)&&V(e,"edited",u[0]&&u[0].actionsChanged),(!_||y&1)&&V(e,"invalid",u[0]&&u[0].actions.toSorted(J).some(u[8]))},i(u){_||(M(n.$$.fragment,u),_=!0)},o(u){z(n.$$.fragment,u),_=!1},d(u){u&&d(e),f&&f.d(),te(n),b=!1,ge(v)}}}function J(o,e){return o-e}function vt(o,e,s){let n;re(o,ze,m=>s(3,n=m));let{chord:l=void 0}=e;const r=Xe();let a=new Set,t=!1;function i(){s(1,a=new Set),s(2,t=!0)}function c(m){t&&(m.preventDefault(),a.add(qe(m,Me(Ye)?.device==="X")),s(1,a))}function _(){if(t&&(s(2,t=!1),!(a.size<2))){if(!l)return r("submit",[...a].sort(J));ne.update(m=>(m.push({type:se.Chord,id:l.id,actions:[...a].sort(J),phrase:l.phrase}),m))}}function b(m){Ke(m,$=>{ne.update(f=>(f.push({type:se.Chord,id:l.id,actions:[...l.actions,$].sort(J),phrase:l.phrase}),f))})}const v=(m,$)=>l?.actions[$]!==m;return o.$$set=m=>{"chord"in m&&s(0,l=m.chord)},[l,a,t,n,i,c,_,b,v]}class Ve extends fe{constructor(e){super(),de(this,e,vt,bt,ue,{chord:0})}}function kt(o){let e,s="restore_from_trash",n,l,r,a;return{c(){e=T("button"),e.textContent=s,this.h()},l(t){e=S(t,"BUTTON",{class:!0,"data-svelte-h":!0}),W(e)!=="svelte-7lvlk3"&&(e.textContent=s),this.h()},h(){k(e,"class","icon compact")},m(t,i){O(t,e,i),l=!0,r||(a=Y(e,"click",o[2]),r=!0)},p:X,i(t){l||(t&&ke(()=>{l&&(n||(n=ae(e,me,{},!0)),n.run(1))}),l=!0)},o(t){t&&(n||(n=ae(e,me,{},!1)),n.run(0)),l=!1},d(t){t&&d(e),t&&n&&n.end(),r=!1,a()}}}function yt(o){let e,s="delete",n,l,r,a;return{c(){e=T("button"),e.textContent=s,this.h()},l(t){e=S(t,"BUTTON",{class:!0,"data-svelte-h":!0}),W(e)!=="svelte-18t8q"&&(e.textContent=s),this.h()},h(){k(e,"class","icon compact")},m(t,i){O(t,e,i),l=!0,r||(a=Y(e,"click",o[1]),r=!0)},p:X,i(t){l||(t&&ke(()=>{l&&(n||(n=ae(e,me,{},!0)),n.run(1))}),l=!0)},o(t){t&&(n||(n=ae(e,me,{},!1)),n.run(0)),l=!1},d(t){t&&d(e),t&&n&&n.end(),r=!1,a()}}}function Ct(o){let e,s,n,l,r,a,t,i,c,_,b,v="undo",m,$,f,u,y="share",E,h,D;s=new Ve({props:{chord:o[0]}}),r=new _t({props:{chord:o[0]}});const N=[yt,kt],B=[];function g(p,w){return p[0].deleted?1:0}return i=g(o),c=B[i]=N[i](o),{c(){e=T("th"),Z(s.$$.fragment),n=U(),l=T("td"),Z(r.$$.fragment),a=U(),t=T("td"),c.c(),_=U(),b=T("button"),b.textContent=v,m=U(),$=T("div"),f=U(),u=T("button"),u.textContent=y,this.h()},l(p){e=S(p,"TH",{});var w=P(e);x(s.$$.fragment,w),w.forEach(d),n=I(p),l=S(p,"TD",{class:!0});var K=P(l);x(r.$$.fragment,K),K.forEach(d),a=I(p),t=S(p,"TD",{class:!0});var L=P(t);c.l(L),_=I(L),b=S(L,"BUTTON",{class:!0,"data-svelte-h":!0}),W(b)!=="svelte-1keg9r3"&&(b.textContent=v),m=I(L),$=S(L,"DIV",{class:!0}),P($).forEach(d),f=I(L),u=S(L,"BUTTON",{class:!0,"data-svelte-h":!0}),W(u)!=="svelte-19qx12b"&&(u.textContent=y),L.forEach(d),this.h()},h(){k(l,"class","svelte-1dhtuxh"),k(b,"class","icon compact"),V(b,"disabled",o[0].isApplied),k($,"class","separator svelte-1dhtuxh"),k(u,"class","icon compact"),k(t,"class","table-buttons svelte-1dhtuxh")},m(p,w){O(p,e,w),ee(s,e,null),O(p,n,w),O(p,l,w),ee(r,l,null),O(p,a,w),O(p,t,w),B[i].m(t,null),C(t,_),C(t,b),C(t,m),C(t,$),C(t,f),C(t,u),E=!0,h||(D=[Y(b,"click",o[2]),Y(u,"click",o[3])],h=!0)},p(p,[w]){const K={};w&1&&(K.chord=p[0]),s.$set(K);const L={};w&1&&(L.chord=p[0]),r.$set(L);let j=i;i=g(p),i===j?B[i].p(p,w):(le(),z(B[j],1,1,()=>{B[j]=null}),ie(),c=B[i],c?c.p(p,w):(c=B[i]=N[i](p),c.c()),M(c,1),c.m(t,_)),(!E||w&1)&&V(b,"disabled",p[0].isApplied)},i(p){E||(M(s.$$.fragment,p),M(r.$$.fragment,p),M(c),E=!0)},o(p){z(s.$$.fragment,p),z(r.$$.fragment,p),z(c),E=!1},d(p){p&&(d(e),d(n),d(l),d(a),d(t)),te(s),te(r),B[i].d(),h=!1,ge(D)}}}function Et(o,e){return o.actions.length===e.actions.length&&o.actions.every((s,n)=>s===e.actions[n])}function Tt(o,e,s){let{chord:n}=e;function l(){ne.update(t=>(t.push({type:se.Chord,id:n.id,actions:n.actions,phrase:n.phrase,deleted:!0}),t))}function r(){ne.update(t=>t.filter(i=>!(i.type===se.Chord&&Et(i,n))))}async function a(t){const i=new URL(window.location.href);i.searchParams.set("import",await at({charaVersion:1,type:"chords",chords:[[n.actions,n.phrase]]})),await navigator.clipboard.writeText(i.toString());let c;ot(t.target,{onCreate(_){const b=_.popper.querySelector(".tippy-content");c=new st({target:b})},onHidden(_){_.destroy()},onDestroy(_){c.$destroy()}}).show()}return o.$$set=t=>{"chord"in t&&s(0,n=t.chord)},[n,l,r,a]}class St extends fe{constructor(e){super(),de(this,e,Tt,Ct,ue,{chord:0})}}function Le(o,e,s){const n=o.slice();return n[20]=e[s][0],n}function $t(o){let e;return{c(){e=G("- / -")},l(s){e=Q(s,"- / -")},m(s,n){O(s,e,n)},p:X,d(s){s&&d(e)}}}function wt(o){let e=o[2]+1+"",s,n,l=o[4]+1+"",r;return{c(){s=G(e),n=G(" / "),r=G(l)},l(a){s=Q(a,e),n=Q(a," / "),r=Q(a,l)},m(a,t){O(a,s,t),O(a,n,t),O(a,r,t)},p(a,t){t&4&&e!==(e=a[2]+1+"")&&ce(s,e),t&16&&l!==(l=a[4]+1+"")&&ce(r,l)},d(a){a&&(d(s),d(n),d(r))}}}function Re(o){let e,s,n,l,r,a;return n=new Ve({}),n.$on("submit",o[14]),{c(){e=T("tr"),s=T("th"),Z(n.$$.fragment),l=T("td"),r=T("td"),this.h()},l(t){e=S(t,"TR",{});var i=P(e);s=S(i,"TH",{class:!0});var c=P(s);x(n.$$.fragment,c),c.forEach(d),l=S(i,"TD",{}),P(l).forEach(d),r=S(i,"TD",{}),P(r).forEach(d),i.forEach(d),this.h()},h(){k(s,"class","new-chord svelte-1sn9vgc")},m(t,i){O(t,e,i),C(e,s),ee(n,s,null),C(e,l),C(e,r),a=!0},p:X,i(t){a||(M(n.$$.fragment,t),a=!0)},o(t){z(n.$$.fragment,t),a=!1},d(t){t&&d(e),te(n)}}}function At(o){let e,s=o[3].configure.chords.search.NO_RESULTS()+"",n;return{c(){e=T("caption"),n=G(s),this.h()},l(l){e=S(l,"CAPTION",{class:!0});var r=P(e);n=Q(r,s),r.forEach(d),this.h()},h(){k(e,"class","svelte-1sn9vgc")},m(l,r){O(l,e,r),C(e,n)},p(l,r){r&8&&s!==(s=l[3].configure.chords.search.NO_RESULTS()+"")&&ce(n,s)},i:X,o:X,d(l){l&&d(e)}}}function Ot(o){let e=[],s=new Map,n,l,r=_e(o[5].slice(o[2]*o[6]-(o[2]===0?0:1),(o[2]+1)*o[6]-1));const a=t=>JSON.stringify(t[20].id);for(let t=0;t<r.length;t+=1){let i=Le(o,r,t),c=a(i);s.set(c,e[t]=Ue(c,i))}return{c(){for(let t=0;t<e.length;t+=1)e[t].c();n=oe()},l(t){for(let i=0;i<e.length;i+=1)e[i].l(t);n=oe()},m(t,i){for(let c=0;c<e.length;c+=1)e[c]&&e[c].m(t,i);O(t,n,i),l=!0},p(t,i){i&100&&(r=_e(t[5].slice(t[2]*t[6]-(t[2]===0?0:1),(t[2]+1)*t[6]-1)),le(),e=Be(e,i,a,1,t,r,s,n.parentNode,He,Ue,n,Le),ie())},i(t){if(!l){for(let i=0;i<r.length;i+=1)M(e[i]);l=!0}},o(t){for(let i=0;i<e.length;i+=1)z(e[i]);l=!1},d(t){t&&d(n);for(let i=0;i<e.length;i+=1)e[i].d(t)}}}function Ue(o,e){let s,n,l,r;return n=new St({props:{chord:e[20]}}),{key:o,first:null,c(){s=T("tr"),Z(n.$$.fragment),l=U(),this.h()},l(a){s=S(a,"TR",{});var t=P(s);x(n.$$.fragment,t),l=I(t),t.forEach(d),this.h()},h(){this.first=s},m(a,t){O(a,s,t),ee(n,s,null),C(s,l),r=!0},p(a,t){e=a;const i={};t&100&&(i.chord=e[20]),n.$set(i)},i(a){r||(M(n.$$.fragment,a),r=!0)},o(a){z(n.$$.fragment,a),r=!1},d(a){a&&d(s),te(n)}}}function Dt(o){let e,s,n,l,r,a,t,i,c,_="navigate_before",b,v,m="navigate_next",$,f,u,y,E,h,D,N,B,g,p,w;function K(A,H){return A[4]!==-1?wt:$t}let L=K(o),j=L(o),R=o[2]===0&&Re(o);const ye=[Ot,At],F=[];function Ce(A,H){return A[4]!==-1?0:1}return E=Ce(o),h=F[E]=ye[E](o),{c(){e=T("meta"),s=U(),n=T("div"),l=T("input"),a=U(),t=T("div"),j.c(),i=U(),c=T("button"),c.textContent=_,b=U(),v=T("button"),v.textContent=m,$=U(),f=T("section"),u=T("table"),R&&R.c(),y=U(),h.c(),D=U(),N=T("textarea"),this.h()},l(A){const H=Fe("svelte-2ux8j7",document.head);e=S(H,"META",{name:!0,content:!0}),H.forEach(d),s=I(A),n=S(A,"DIV",{class:!0});var q=P(n);l=S(q,"INPUT",{type:!0,placeholder:!0,class:!0}),a=I(q),t=S(q,"DIV",{class:!0});var Ee=P(t);j.l(Ee),Ee.forEach(d),i=I(q),c=S(q,"BUTTON",{class:!0,"data-svelte-h":!0}),W(c)!=="svelte-18qb9j7"&&(c.textContent=_),b=I(q),v=S(q,"BUTTON",{class:!0,"data-svelte-h":!0}),W(v)!=="svelte-wgltnv"&&(v.textContent=m),q.forEach(d),$=I(A),f=S(A,"SECTION",{class:!0});var he=P(f);u=S(he,"TABLE",{class:!0});var pe=P(u);R&&R.l(pe),y=I(pe),h.l(pe),pe.forEach(d),D=I(he),N=S(he,"TEXTAREA",{placeholder:!0,class:!0}),P(N).forEach(d),he.forEach(d),this.h()},h(){document.title="Chord Manager - CharaChorder Device Manager",k(e,"name","description"),k(e,"content","Manage your chords"),k(l,"type","search"),k(l,"placeholder",r=o[3].configure.chords.search.PLACEHOLDER(o[0].length)),k(l,"class","svelte-1sn9vgc"),k(t,"class","paginator svelte-1sn9vgc"),k(c,"class","icon"),k(v,"class","icon"),k(n,"class","search-container svelte-1sn9vgc"),k(u,"class","svelte-1sn9vgc"),k(N,"placeholder",B=o[3].configure.chords.TRY_TYPING()),k(N,"class","svelte-1sn9vgc"),k(f,"class","svelte-1sn9vgc")},m(A,H){C(document.head,e),O(A,s,H),O(A,n,H),C(n,l),C(n,a),C(n,t),j.m(t,null),C(n,i),C(n,c),C(n,b),C(n,v),O(A,$,H),O(A,f,H),C(f,u),R&&R.m(u,null),C(u,y),F[E].m(u,null),C(f,D),C(f,N),o[15](f),g=!0,p||(w=[Y(l,"input",o[8]),Y(c,"click",o[12]),Se($e.call(null,c,{shortcut:"ctrl+left"})),Y(v,"click",o[13]),Se($e.call(null,v,{shortcut:"ctrl+right"}))],p=!0)},p(A,[H]){(!g||H&9&&r!==(r=A[3].configure.chords.search.PLACEHOLDER(A[0].length)))&&k(l,"placeholder",r),L===(L=K(A))&&j?j.p(A,H):(j.d(1),j=L(A),j&&(j.c(),j.m(t,null))),A[2]===0?R?(R.p(A,H),H&4&&M(R,1)):(R=Re(A),R.c(),M(R,1),R.m(u,y)):R&&(le(),z(R,1,1,()=>{R=null}),ie());let q=E;E=Ce(A),E===q?F[E].p(A,H):(le(),z(F[q],1,1,()=>{F[q]=null}),ie(),h=F[E],h?h.p(A,H):(h=F[E]=ye[E](A),h.c()),M(h,1),h.m(u,null)),(!g||H&8&&B!==(B=A[3].configure.chords.TRY_TYPING()))&&k(N,"placeholder",B)},i(A){g||(M(R),M(h),g=!0)},o(A){z(R),z(h),g=!1},d(A){A&&(d(s),d(n),d($),d(f)),d(e),j.d(),R&&R.d(),F[E].d(),o[15](null),p=!1,ge(w)}}}const Ie=38;function Nt(o,e,s){let n,l,r,a,t,i;re(o,ze,g=>s(3,l=g)),re(o,we,g=>s(0,r=g));let c;const _=Oe(0);re(o,_,g=>s(6,i=g));let b;Je(()=>{b=new ResizeObserver(()=>{_.set(Math.floor(c.clientHeight/Ie))}),_.set(Math.floor(c.clientHeight/Ie)),b.observe(c)}),Ge(()=>{b?.disconnect()});function v(g){const p=new rt({tokenize:"full"});return g.forEach((w,K)=>{"phrase"in w&&p.add(K,w.phrase.map(L=>tt[L]?.id).filter(L=>!!L).join(""))}),p}const m=Oe(void 0);function $(g){const p=g.target.value;m.set(p&&n?n.search(p):void 0),s(2,E=0)}function f(g){const p=JSON.stringify(g);if(r.some(w=>JSON.stringify(w.actions)===p)){alert(l.configure.chords.DUPLICATE());return}ne.update(w=>(w.push({type:se.Chord,id:g,actions:g,phrase:[]}),w))}const u=Ae([m,we],([g,p])=>g?.map(w=>[p[w],w])??p.map((w,K)=>[w,K]));re(o,u,g=>s(5,t=g));const y=Ae([u,_],([g,p])=>Math.ceil((g.length+1)/p)-1);re(o,y,g=>s(4,a=g)),Qe("cursor-crossfade",it({}));let E=0;const h=()=>s(2,E=Math.max(E-1,0)),D=()=>s(2,E=Math.min(E+1,a)),N=({detail:g})=>f(g);function B(g){ve[g?"unshift":"push"](()=>{c=g,s(1,c)})}return o.$$.update=()=>{o.$$.dirty&1&&(n=r?.length>0?v(r):void 0)},[r,c,E,l,a,t,i,_,$,f,u,y,h,D,N,B]}class qt extends fe{constructor(e){super(),de(this,e,Nt,Dt,ue,{})}}export{qt as component};
//# sourceMappingURL=5.a0cee28c.js.map
